{% extends 'base.html' %}

{% block title %}Coaching Survey{% endblock %}
{% block head %}
  {% include 'addons/vue.html' %}
{% endblock %}

{% block content %}
<div class="container">
  <div class="jumbotron">
    <h1>How Are We Doing?</h1>
  </div>
<p class="lead">We are always trying bring our absolute best to all of our clients!</p>

  <p>Please fill out the short form and let us know what you think of your last
  Series of sessions with us.</p>
  <form>
    <div class="input-group mb-3">
      <input type="text" name="name" class="form-control" placeholder="Your Name">
    </div>
    <div class="input-group mb-3">
      <input type="email" name="email" class="form-control" placeholder="Your
      Email Address">
    </div>
    <div class="input-group mb-3" id="starRating">
      <label>Stars</label>
      <star-item
           v-for="star in stars"
           v-bind:star="star"
           v-bind:toggle="toggle"
           v-bind:key="star.id"
           v-bind:class="star"
           ></star-item>
    </div>

    <div class="input-group">
      <button class="btn btn-primary">Submit</button>
    </div>

  </form>

</div>

{% endblock %}

{% block body_javascript %}
<script>
  Vue.component('star-item', {
    props: ['star', 'toggle'],
    template: '<i v-bind:class="star" @click="toggle(star)" @mouseover="toggle(star)"></i>',
    })

  var far = true
  var fas = false


  var app = new Vue({
    el: '#starRating',
    data: function () {
    return {
      stars: [{'id': 1}, {'id': 2}, {'id': 3}, {'id': 4}, {'id': 5}].map(function(e) {
        return {
          'id': e.id,
          'far': far,
          'fas': fas,
          'fa-2x': true,
          'fa-star': true,
          'text-warning': true
           }
          })
        }
      },
      methods: {
        toggle: function (star) {
        this.stars.forEach(function (e) {
            if (e.id <= star.id) {
              e.far = false
              e.fas = true
              }
            else {
              e.far = true
              e.fas = false
              }
            })
         }
        }
    })
</script>
{% endblock %}
